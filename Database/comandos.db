CREATE DATABASE db_sourcecode;

USE db_sourcecode;

CREATE TABLE Usuarios (
	id INT AUTO_INCREMENT,
	usuario VARCHAR(32) NOT NULL,
	email VARCHAR(50) UNIQUE NOT NULL,
	senha TEXT NOT NULL,
	PRIMARY KEY (id)
);

CREATE TABLE Repositorios (
	id INT AUTO_INCREMENT,
	titulo VARCHAR(32) NOT NULL,
	autor_id INT NOT NULL,
	linguagem VARCHAR(5) NOT NULL,
	descricao TEXT,
	codigo TEXT NOT NULL,
	FOREIGN KEY (autor_id) REFERENCES Usuarios(id),
	PRIMARY KEY (id)
);

INSERT INTO Usuarios(usuario, email, senha) VALUES("lucas", "lucas@gmail.com", sha1("lucas123"));

INSERT INTO Repositorios (titulo, autor_id, linguagem, descricao, codigo) VALUES ("somar numeros", 1, "js", "função para realizar a soma de numeros", "const sum = (...n) => ...n.reduce((sum, i) => { return sum + i })");
INSERT INTO Repositorios (titulo, autor_id, linguagem, descricao, codigo) VALUES ("bhaskara", 1, "js", "função que realiza a formula de bhaskara", "const sum = (a, b, c) => { let x1 = (-b + Math.sqrt(b**2 - 4*a*c)) / 2*a; let x2 = (-b + Math.sqrt(b**2 - 4*a*c)) / 2*a; return [x1, x2] }");